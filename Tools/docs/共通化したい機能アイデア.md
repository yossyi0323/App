# 共通化したい機能・アイデアメモ

## マスタデータ管理ツール
- 管理者がブラウザからアクセスし、Excel/CSVでダウンロード・アップロードして編集できるWeb管理画面
- 複数のアプリで共通利用できるAPIサーバー機能
- 認証・権限管理、履歴管理、ロールバック機能なども将来的に検討

## その他の共通化したい機能
- REST API自動生成ツール
- 汎用的な自動保存ユーティリティ
- 論理名・物理名変換ツール
- データベース管理支援ツール
- 状態管理の共通仕組み
- **A5:SQL Mk-2 (.a5er) → Mermaid ER図変換ツール**
	- .a5erファイルをパースしてMermaid形式のER図を自動生成
	- Git管理している.a5erから自動でObsidian用のER図.mdを生成
	- テーブル定義書もMarkdown形式で出力できると便利

## 汎用CRUD APIサービス（将来の妄想）
- **コンセプト**: DDLだけ実行すれば、全テーブルのCRUD APIが自動で使える
- **仕組み**: PostgreSQLの`information_schema`からメタデータを読み取り、動的にAPIを提供
- **使い方イメージ**:
	```
	DDL実行 → テーブル作成
	  ↓
	ツール起動（DB接続情報のみ設定）
	  ↓
	GET /api/crud/m_user
	POST /api/crud/m_user
	PUT /api/crud/m_user/1
	DELETE /api/crud/m_user/1
	が自動で使える
	```
- **課題**:
	- SQLインジェクション対策（ホワイトリスト必須）
	- 楽観ロック・排他制御は別途実装が必要
	- ビジネスロジック（ステータス連動など）は挟めない
	- 既存ツール（PostgREST、Hasura、Supabase）と似たコンセプト
- **参考**:
	- PostgREST: https://postgrest.org/
	- Hasura: https://hasura.io/
	- Supabase: https://supabase.com/
- **備考**: 単純CRUDのボイラープレート削減には有用だが、複雑な業務ロジックは結局手書きが必要

## Java ⇄ TypeScript 型変換ツール
- **Java → TypeScript**: typescript-generator（Mavenプラグイン）で実用的
	- 精度高い、enum対応、ネスト対応
	- 検証済み: App/typescript-generator-sample/
	- 課題: 生成したTypeScriptファイルをフロントエンドにコピーする手間が面倒
- **TypeScript → Java**: 直接変換ツールはほぼなし
	- JSON Schema経由なら可能（typescript-json-schema → jsonschema2pojo）
	- 手動変換が現実的
- **結論**: nextday-operations-prepareでは手動で型定義を書く方が楽

## メモ
- まずはアイデア段階。実装は今後の検討事項。
- 他にも思いついたらどんどん追記していく。 