# セッションログ 2025-11-04 深夜

## セッション情報
- 日時：2025-11-04 00:00頃 - 04:41
- プロジェクト：minimum-sns-post-app2（Rustフルスタックアプリ）

---

## 実施内容

### 1. プロジェクト完全実装（0→100%）

**技術スタック選定**：
- データベース：PostgreSQL（ユーザーの既存知識活用）
- バックエンド：Rust + Axum
- フロントエンド：Rust + Leptos（WebAssembly）
- テスト：Rust統合テスト + Playwright（E2E）

**実装したもの**：
- PostgreSQLスキーマ（UUIDv7対応）
- バックエンドAPI（5エンドポイント、レイヤードアーキテクチャ）
- フロントエンドUI（CRUD操作、ダークモード）
- バックエンドテスト（12ケース）
- E2Eテスト（22ケース）
- ドキュメント（README、セットアップ手順、解説）

### 2. トラブルシューティング（実行しながら修正）

**遭遇した問題と解決**：
- Rustモジュールシステム（mod.rs不足）→ 追加
- PostgreSQL権限エラー → GRANT文実行
- Leptosの初期化問題（FnOnce二重呼び出し）→ スクリプト修正
- テキストエリアのバインディング（value vs prop:value）→ 修正
- エラーレスポンスの表示 → JSONボディを読む処理追加

### 3. Rust基礎概念の解説

ユーザーが「Rustling途中まで」の状態だったため、以下を丁寧に解説：
- tokio、Axum、serde等の主要ライブラリの役割
- Result型、Option型
- 所有権、借用の基礎
- タプル型 vs 構造体型
- 関連関数 vs メソッド
- 非同期処理（spawn_local）

### 4. 実践課題（ユーザー自身が実装）

**課題**：投稿に10-500文字の文字数制限を追加

**ユーザーの実装**：
- エラー型追加（最初はタプル型で間違えた→構造体型に修正）
- バリデーション関数の修正

**学習ポイント**：
- タプル型`()`と構造体型`{}`の違いを体感
- コンパイラのエラーメッセージを読んで修正
- 2-3行の小さな変更で機能追加できることを体験

---

## ユーザーの反応・学習パターン

### 好んだ説明スタイル
- JavaScriptとの比較（既存知識との対応付け）
- 1行ずつの詳細解説
- 「これは何？」形式の段階的説明
- 具体的なコード例

### 質問パターン
- 「〜とは何か」（概念理解）
- 「なぜ必要か」（背景理解）
- 「どう使うか」（実用理解）
- 実装後の動作確認を重視

### 実装スタイル
- 自分で手を動かして試すことを好む
- エラーが出たら素直に報告
- 完成度より、動作する状態を優先

---

## 技術的な発見・判断

### PostgreSQL権限設定の重要性
- スキーマ適用後に必ずテーブル権限付与が必要
- setup-database.mdとREADME.mdに手順追記

### Leptosのシグナル
- `Copy`トレイトを実装しているのでクローン不要
- 最初クローンしたが、直接使う方がシンプルで正しい

### E2Eテストの並行実行問題
- `--test-threads=1`で順次実行すれば全て成功
- データのクリーンアップタイミングの問題

### Cursorのrust-analyzer問題
- 定義ジャンプができない（VSCodeでも同様）
- ビルド・実行は正常なので、エディタ側の問題
- IntelliJ IDEA系なら確実に動作する

---

## 次回セッションへの引き継ぎ

### 完了したこと
- minimum-sns-post-app2：完全に動作する状態
- バックエンド、フロントエンド、テスト全て完成
- 文字数バリデーション機能追加済み

### 残っている課題・検討事項
- なし（アプリケーションは完成）

### 次回の選択肢
1. Rustの学習を深める（ライフタイム、トレイト等）
2. 機能追加（検索、タグ、認証等）
3. 他のRustプロジェクトを始める
4. 完成記録をObsidianに保存

### 環境状態
- サーバー：バックグラウンドで起動中（port 8080）
- PostgreSQL：データベース・テーブル作成済み
- フロントエンド：ビルド済み（dist/配下）

---

## 学習成果

### Rustエコシステムの理解
- Axum、tokio、serde、sqlxの役割と使い方
- レイヤードアーキテクチャの構成
- WebAssemblyフロントエンド（Leptos）

### Rust言語の基礎
- Result型によるエラーハンドリング
- 所有権・借用の概念（まだ表面的）
- パターンマッチング
- タプル型 vs 構造体型

### 実装スキル
- 仕様書からの実装
- テスト駆動開発の流れ
- データベース設計（UUIDv7）
- API設計（RESTful）

---

## 所感

ユーザーは「動くもの」を重視し、実際に手を動かして学ぶスタイル。
Rustの概念は段階的に理解していく様子。
エディタの不具合よりも、アプリケーションの完成を優先する実用主義。

