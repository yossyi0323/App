# 本番環境設定（AWS RDS用）
spring:
  config:
    activate:
      on-profile: prod
  
  # データベース設定（RDS接続、環境変数で上書き可能）
  datasource:
    # 環境変数 SPRING_DATASOURCE_URL で上書き可能
    # 例: jdbc:postgresql://[RDSエンドポイント]:5432/minimum_sns_post_app1
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/minimum_sns_post_app1}
    # 環境変数 SPRING_DATASOURCE_USERNAME で上書き可能
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    # 環境変数 SPRING_DATASOURCE_PASSWORD で上書き可能
    password: ${SPRING_DATASOURCE_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
    
  # JPA/Hibernate設定（本番用）
  jpa:
    hibernate:
      ddl-auto: validate  # 本番ではスキーマ変更を禁止
    show-sql: false  # 本番ではSQLログを出力しない
    properties:
      hibernate:
        format_sql: false
        
  # CORS設定（本番用：実際のドメインを指定）
  web:
    cors:
      # 環境変数 CORS_ALLOWED_ORIGINS で上書き可能
      # 例: "https://yourdomain.com"
      allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000}
      allowed-methods: "GET,POST,PUT,DELETE,OPTIONS"
      allowed-headers: "*"
      allow-credentials: true

# ログ設定（本番用：INFOレベル）
logging:
  level:
    com.example.anonymousmemo: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: WARN  # SQLログは警告以上のみ
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%level] %logger{36} - %msg%n"

