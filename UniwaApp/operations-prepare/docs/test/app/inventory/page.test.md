# 在庫確認ページ（page.tsx）テスト仕様書

## 1. テスト概要
在庫確認ページの主要機能をテストし、以下の点を確認します：
- 日付選択機能
- 場所選択機能
- 一括操作機能
- 個別アイテムの状態管理
- エラー表示
- ローディング状態

## 2. テストケース

### 2.1 初期表示テスト
#### 確認条件
- ページを開いた時の初期状態

#### 想定結果
- 現在の日付が選択されている
- 場所選択が表示されている
- 一括操作バーが表示されている
- アイテムリストが表示されている
- エラー表示がない

### 2.2 日付選択テスト
#### 確認条件
- 日付を変更した時

#### 想定結果
- 選択した日付の在庫データが表示される
- アイテムの状態が選択した日付のデータに更新される

### 2.3 場所選択テスト
#### 確認条件
- 場所を選択した時

#### 想定結果
- 選択した場所のアイテム一覧が表示される
- 場所名が一括操作バーに表示される
- アイテムの状態が選択した場所のデータに更新される

### 2.4 一括操作テスト
#### 確認条件
- 「全て確認済に」ボタンをクリックした時

#### 想定結果
- 全てのアイテムの確認状態が「確認済」に更新される
- 確認済バッジの数が更新される

#### 確認条件
- 「全て要補充に」ボタンをクリックした時

#### 想定結果
- 全てのアイテムの補充状態が「要補充」に更新される
- 補充数が1以上の場合のみ更新される
- 要補充バッジの数が更新される

### 2.5 個別アイテム操作テスト
#### 確認条件
- 在庫数を変更した時

#### 想定結果
- 在庫数が更新される
- 在庫数が1以上の場合、確認状態が「確認済」に更新される

#### 確認条件
- 補充数を変更した時

#### 想定結果
- 補充数が更新される
- 補充数が1以上の場合、補充状態が「要補充」に更新される
- 確認状態が「確認済」に更新される

#### 確認条件
- 補充要否を切り替えた時

#### 想定結果
- 補充状態が更新される
- 確認状態が「確認済」に更新される

### 2.6 エラー表示テスト
#### 確認条件
- 日付が未選択の場合

#### 想定結果
- エラーメッセージが表示される

#### 確認条件
- 場所が未選択の場合

#### 想定結果
- エラーメッセージが表示される

### 2.7 ローディング状態テスト
#### 確認条件
- データ取得中の場合

#### 想定結果
- ローディング表示が表示される
- 操作が無効化される

## 3. テストデータ
### 3.1 モックデータ
```typescript
const mockPlaces = [
  {
    place_id: '1',
    place_name: '倉庫A',
    place_type: 'DESTINATION'
  }
];

const mockItems = [
  {
    item_id: '1',
    item_name: '商品A',
    current_stock: 0,
    replenishment_count: 0,
    replenishment_status: 'not-required',
    check_status: 'unchecked'
  }
];
```

### 3.2 テスト用APIレスポンス
```typescript
const mockApiResponse = {
  data: {
    places: mockPlaces,
    items: mockItems
  },
  error: null
};
```

## 4. テスト実行手順
1. テスト環境のセットアップ
   ```bash
   npm install
   npm test
   ```

2. 特定のテストの実行
   ```bash
   npm test page.test.tsx
   ```

## 5. 注意事項
- テスト実行前にモックデータが正しく設定されていることを確認
- 非同期処理のテストでは適切な待機時間を設定
- エラーケースのテストでは、エラーメッセージの正確性を確認 