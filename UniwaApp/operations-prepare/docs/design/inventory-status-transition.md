# 在庫確認画面 ステータス遷移図

本資料は「アプリケーション概念設計ノート.md」の区分値定義・業務フローに基づき、在庫確認画面で扱う各種ステータスの状態遷移をMermaid記法で図示したものです。

---

## 1. 在庫確認ステータス 状態遷移図

```mermaid
stateDiagram-v2
    [*] --> 未確認
    未確認 --> 確認済 : チェック操作
    未確認 --> 確認不要 : 「確認不要」チェック
    確認済 --> 未確認 : チェック解除
    確認済 --> 確認不要 : 「確認不要」チェック
    確認不要 --> 未確認 : 「確認不要」解除
```

---

## 2. 補充ステータス 状態遷移図

```mermaid
stateDiagram-v2
    [*] --> 補充不要
    補充不要 --> 要補充 : チェック操作 or 補充数入力>0
    要補充 --> 補充不要 : チェック解除 or 補充数0/空
    要補充 --> 補充済 : 補充業務で操作
    補充済 --> 要補充 : チェック解除
```

---

## 3. 作成ステータス 状態遷移図

```mermaid
stateDiagram-v2
    [*] --> 作成不要
    作成不要 --> 要作成 : 補充パターン=作成 かつ 要補充化
    要作成 --> 作成済 : 作成業務で操作
    要作成 --> 作成依頼済 : 作成依頼操作
    作成済 --> 要作成 : チェック解除
    作成依頼済 --> 要作成 : チェック解除
    要作成 --> 作成不要 : 要補充解除
```

---

## 4. 発注依頼ステータス 状態遷移図

```mermaid
stateDiagram-v2
    [*] --> 発注不要
    発注不要 --> 要発注依頼 : 補充元在庫不足等で操作
    要発注依頼 --> 発注依頼済 : 発注依頼業務で操作
    発注依頼済 --> 要発注依頼 : チェック解除
    要発注依頼 --> 発注不要 : 操作で解除
```

---

※各状態遷移のトリガーは業務フロー・画面操作に準拠。詳細は「アプリケーション概念設計ノート.md」を参照。 


```mermaid
stateDiagram-v2
    [*] --> 未確認
    未確認 --> 確認済 : 在庫数/補充数/要補充いずれか入力
    未確認 --> 確認不要 : 「確認不要」チェック
    確認済 --> 未確認 : 入力値全て初期値に戻す
    確認済 --> 確認不要 : 「確認不要」チェック
    確認不要 --> 未確認 : 「確認不要」解除

    %% 補充ステータス
    確認済 --> 補充不要 : 初期値
    補充不要 --> 要補充 : 補充数>0 or 「要補充」チェック
    要補充 --> 補充不要 : 補充数=0 or 「要補充」解除
    要補充 --> 補充済 : 補充業務で操作
    補充済 --> 要補充 : チェック解除

    %% 作成ステータス（補充パターン=作成 の場合のみ）
    要補充 --> 要作成 : 補充パターン=作成
    要作成 --> 作成済 : 作成業務で操作
    要作成 --> 作成依頼済 : 作成依頼操作
    作成済 --> 要作成 : チェック解除
    作成依頼済 --> 要作成 : チェック解除
    要作成 --> 作成不要 : 要補充解除

    %% 発注依頼ステータス
    要補充 --> 要発注依頼 : 補充元在庫不足等で操作
    要発注依頼 --> 発注依頼済 : 発注依頼業務で操作
    発注依頼済 --> 要発注依頼 : チェック解除
    要発注依頼 --> 発注不要 : 操作で解除

    %% 連動ルール
    note right of 要補充
      ・補充パターン=作成なら、要補充化で要作成
      ・要補充解除で作成不要
      ・補充元在庫不足等で要発注依頼
    end note

    note right of 確認済
      ・補充ステータスが要補充/補充済なら確認済必須
      ・確認済でないと補充/作成/発注依頼は初期値以外不可
    end note
```

