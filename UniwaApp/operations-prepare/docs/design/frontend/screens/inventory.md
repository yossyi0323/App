# 在庫確認画面 詳細設計書

## 1. 画面概要

- 飲食店の翌日営業準備における「在庫確認」業務を効率化するための画面。
- 補充先ごとに品目リストを表示し、在庫数・補充数・各種ステータスを直感的に入力・管理できる。
- スマートフォンでの片手操作・シンプルUIを重視。

## 2. 機能要件

- 業務日付の選択（カレンダー）
- 補充先（場所）の選択（プルダウン）
- 補充先ごとの品目リスト表示
- 各品目ごとに以下を入力・選択可能
  - 在庫数（数値入力）
  - 補充数（数値入力）
  - 在庫確認ステータス（未確認／確認済／確認不要）
  - 補充ステータス（補充不要／要補充）
- ステータスバッジ・件数表示
- 入力内容の自動保存（localStorage）
- エラーハンドリング・バリデーション

## 3. 画面項目定義表

| 項目名                         | 種別       | 必須 | 備考                       |
| ------------------------------ | ---------- | ---- | -------------------------- |
| 業務日付                       | 日付       | ○    | カレンダーUI               |
| 補充先                         | プルダウン | ○    | 補充先マスタから選択       |
| 品目名                         | 表示       | ○    | 品目マスタ                 |
| 在庫数                         | 数値入力   | △    | 確認不要時は非活性         |
| 補充数                         | 数値入力   | △    | 確認不要時は非活性         |
| 在庫確認ステータス             | チェック   | ○    | 未確認／確認済             |
| 在庫確認ステータス(確認不要）) | チェック   | ○    | false／確認不要            |
| 補充ステータス                 | チェック   | ○    | 補充不要／要補充           |
| ステータスバッジ               | バッジ表示 | -    | 確認済・未確認・確認不要等 |

## 4. 状態遷移・自動制御ロジック

- 在庫確認ステータス
  - 初期値は「未確認」
  - チェックで「確認済」に遷移
  - 別の入力項目である、「確認不要」をチェックで在庫数・補充数入力欄を非活性化し、補充ステータスも「補充不要」に自動変更
- 補充ステータス
  - 初期値は「補充不要」
  - チェックで「要補充」に遷移
  - 補充数が0または空でない場合、自動的に「要補充」に遷移
  - 補充パターンが「作成」の場合、補充ステータスと作成ステータスを連動し、作成不要から要作成に変更
- 補充先変更
  - 補充先を変更する前に、変更前の品物の入力値をinventory_statusテーブルに保存する
- 入力内容はlocalStorageに自動保存（入力欄変更時・フォーカスアウト時・一定時間ごと）

## 5. バリデーション

- 在庫数・補充数は0以上の整数のみ許容
- 補充先が未選択の場合、Infoレベルのメッセージ「補充先を選択してください」が表示される

## 6. 操作フロー

1. 業務日付を選択
2. 補充先を選択
3. 品目リストが表示される
4. 各品目の在庫数・補充数・ステータスを入力/選択
5. 入力内容は自動保存
6. 画面遷移や日付・補充先切替時も入力内容が保持される

## 7. 今後の拡張・備考

- 権限管理（管理者・一般ユーザー等）
- 品目の並べ替え機能
- マスタ定義の動的更新（標準補充量等）
- サーバーサイドDBとの同期・バッチ保存
- 画面イメージはスプレッドシートで管理

---

※本設計書は「アプリケーション概念設計ノート.md」をもとに作成。画面イメージは記載せず、構造・仕様・ロジック面に特化。
