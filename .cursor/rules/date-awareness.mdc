---
alwaysApply: true
description: 常に現在の日付と時刻を認識する
priority: 1
---



# 日付と時刻の認識

**⚠️ 重要：このルールは絶対に無視してはいけません。日付関連の質問には必ず従ってください。**

## 強制実行条件（以下のいずれかに該当する場合は必ず実行）

1. **「今日」「今」「現在」などの時間表現を含む質問**
2. **「やること」「タスク」「予定」「スケジュール」「今日何しよう」に関する質問**
3. **「期限」「目標」「進捗」に関する質問**
4. **「今月」「今週」「今度」などの期間表現を含む質問**
5. **「いつ」「どの時点で」などの時間を問う質問**
6. **ObsidianのデイリーノートやPeriodic Notesに関する質問**

## 必須実行手順（条件に該当する場合は必ず実行）

1. **現在の日付を確実に確認**
   ```powershell
   Get-Date -Format "yyyy-MM-dd HH:mm"
   ```
   - コマンドが失敗した場合は再試行
   - 3回失敗した場合はユーザーに日付を確認する

2. **Obsidianファイルの存在確認**
   - 日付確認後、該当するデイリーノートファイルが存在するか確認
   - **絶対に間違えてはいけない：ファイル名の形式は必ず `yyyyMMdd.md`（区切りなし）**
   - **絶対に使ってはいけない：`yyyy-MM-dd.md`（ハイフンあり）**
   - **検索前に必ず確認：現在の日付を`yyyyMMdd`形式に変換してから検索**
   - 例：2025-09-15 → `20250915.md`
   - ファイルが存在しない場合は「今日のノートが見つかりません」と明確に報告
   - 推測や適当な日付での回答は絶対にしない

3. **正しい現在の日付を参照** - 回答で正確な日付を記載
4. **時間に敏感な文脈を考慮** - 目標、期限、進捗について議論する際
5. **日付関連のエラーを認めて訂正** - 間違いを犯した場合は素直に認める

## Periodic Note状態確認（「やること」質問時の必須手順）

ユーザーが「やること」「今日何しよう」などを質問したときは、**必ず以下のPeriodic Noteの状態を確認して報告する**：

### 階層構造と確認原則（最重要）

**Periodic Noteの階層構造：**
```
Yearly（年間目標）
  ↓ 具体化
Quarterly（四半期目標）
  ↓ 実践
Monthly（月間目標）
  ↓ 実行
Weekly（週間計画）※曜日の都合で境界が曖昧
  ↓
Daily（日次メモ）※散発的
```

**背景と変遷：**
- 高校生の頃（2017-2018）：Dailyレベルまで細かく記録（紙の手帳）
- 当時：大学受験という明確な目標、時間もあった
- 現在：仕事があり忙しい、より粗い粒度でのノートテイキング
- 今年前半：Monthlyも書けていなかった
- 2025年6-7月から：再びMonthlyを書き始めた
- 現在の目標：Monthlyを毎月書けるようにしたい

**確認と報告の原則：**
1. **上位のノートが未記入なら、下位には言及しない**（最重要）
	- Yearlyが未記入 → それ以下すべて言及不要
	- Quarterlyが未記入 → Monthly以下言及不要
	- Monthlyが未記入 → Weekly/Daily言及不要
	- 理由：上位が書けていない時点で、下位も大した内容は書けていないため

2. **ユーザーの現在の目標レベル**
	- Yearlyは毎年書いている（習慣化済み）
	- **Monthlyを毎月書くことが現在の目標**
	- WeeklyやDailyは状況次第

3. **テンプレート判定**
	- ファイルが存在してもテンプレートのみ → 未記入扱い
	- 実質的な内容（ユーザーが追記した文章やTODO）があるかを確認

4. **確認の優先順位**
	- Yearly → Quarterly → Monthly の順で確認
	- 上位が未記入なら、そこで報告を止める

### Periodic Notesのディレクトリ構成

**Obsidian Vaultワークスペースからの相対パス：**

```
Obsidian Vault/Periodic Notes/
├── 05.Yearly/
│   └── {yyyy}.md（例: 2025.md）
├── 04.Quarterly/
│   └── {yyyy-Qn}.md（例: 2025-Q4.md）
├── 03.Monthly/
│   └── {yyyy-MM}.md（例: 2025-12.md）
├── 02.Weekly/
│   └── {yyyy-Www}.md（例: 2025-W49.md）
├── 01.Daily/
│   └── {yyyyMMdd}.md（例: 20251217.md）
├── 00.Templates/
└── 99.Google Calendar Note/
```

**重要：**
- Periodic NotesはObsidian Vaultの直下に配置される
- パスは `Periodic Notes/` から始まる（Obsidian Vaultからの相対パス）

### 確認対象

1. **Yearly Note**: `Periodic Notes/05.Yearly/{yyyy}.md`
	- 例: `2025.md`（2025年）

2. **Quarterly Note**: `Periodic Notes/04.Quarterly/{yyyy-Qn}.md`
	- 例: `2025-Q4.md`（2025年第4四半期）

3. **Monthly Note**: `Periodic Notes/03.Monthly/{yyyy-MM}.md`
	- 例: `2025-11.md`（2025年11月）

4. **Weekly Note**: `Periodic Notes/02.Weekly/{yyyy-Www}.md`
	- 例: `2025-W45.md`（2025年第45週）
	- ISO週番号を使用（月曜始まり）
	- 通常は確認・報告不要（Monthlyが優先）

5. **Daily Note**: `Periodic Notes/01.Daily/{yyyyMMdd}.md`
	- 例: `20251108.md`（2025年11月8日）
	- 通常は確認・報告不要（散発的なメモのため）

### 確認手順

```
1. 現在の日付を取得
2. Yearly → Quarterly → Monthly の順で確認
3. 各ファイルの存在と内容を確認（read_fileで試行）
4. テンプレートのみか、実質的な内容があるかを判定
5. 上位が未記入なら、そこで確認を止める
6. 報告は最も上位の未記入レベルのみ言及
```

### 報告形式

**Monthlyが未記入の場合：**
```
今日は[日付]（[曜日]）[時刻]です。

## やるべきこと

- **Monthly Note (2025-11.md)** が未記入です

[他のタスクがあれば簡潔に]
```

**Monthlyが記入済みの場合：**
```
今日は[日付]（[曜日]）[時刻]です。

## やるべきこと

[具体的なタスクリスト]
```

**Quarterlyが未記入の場合：**
```
今日は[日付]（[曜日]）[時刻]です。

## やるべきこと

- **Quarterly Note (2025-Q4.md)** が未記入です
```

### 重要な注意事項

- **階層構造の原則を必ず守る**（上位未記入なら下位に言及しない）
- **Periodic Noteが存在する場合、中身も必ずチェックする**（テンプレートのみは未記入扱い）
- **Weekly/Dailyは基本的に報告しない**（散発的なメモなので、言及する必要なし）
- **ユーザーの現在の目標はMonthlyレベル**（これを最優先で確認・提案）

## 前回セッションの引き継ぎ（「やること」質問時の必須手順）

ユーザーが「やること」「今日何しよう」などを質問したときは、**Periodic Note確認と合わせて前回のAIログも確認する**：

### 確認手順

```
1. 今日のセッションログを全て取得
   - glob_file_search: "ai/{yyyyMMdd}-*.log"
   - 例: 20251103-*.log → その日の全セッションログ
   - 今日のログがない場合は、前日・前々日のログを確認
   
2. 取得したログファイルを並列で読み込み（read_file）
   - 複数ファイルでも並列読み込みなので速い
   
3. 最新セッション（最後のファイル）の以下を確認：
   - "Next session priorities" または "Immediate next steps"
   - "Top priorities from previous session"
   - SESSION PAUSEまたはSESSION END付近の記述
   
4. Periodic Note状態と前回の優先事項を統合（内部で処理）
```

### 報告形式

**基本原則：**
- ユーザーの質問への答えを最初に出す
- 簡潔に、必要な情報だけ伝える

**「やること」質問への回答例：**
```
今日は[日付]（[曜日]）[時刻]です。

[やるべきことリスト]
- [具体的なタスク1]
- [具体的なタスク2]

[補足情報があれば簡潔に]
```

**詳細報告が必要な場合のみ：**
- ユーザーが「前回何してた？」と明示的に聞いたとき
- Periodic Noteが複数未作成で状況説明が必要なとき
- 重要な引き継ぎ事項があるとき

### 重要な注意事項

- **前回のログは内部で読むが、ユーザーには見せない**
- **Periodic Noteが存在する場合、中身も簡単にチェックする**（作成済みか、空か）
- **完了済みタスクを提案しない**（状態確認を徹底）
- **質問に対する答えを最優先で出す**（構造に引っ張られない）

## 人間らしい日付認識（深夜の扱い）

人間の「一日」は時刻で機械的に区切られるものではなく、感覚的なもの。特に深夜は柔軟に対応する。

### 基本方針

1. **基本は時刻で判断**
   - 0時を過ぎたら新しい日として扱う
   - Periodic Noteのファイル名も新しい日付

2. **ユーザーの表現を最優先**
   - 「今日の残り」「昨日」と言われたら → 前日扱い
   - 「こんばんは」と言われたら → 夜、まだ前日の続き
   - 「おはよう」と言われたら → 新しい日の始まり
   - 「まだ寝てない」と言われたら → 前日の続き

3. **深夜の曖昧さを認める**
   - 0-5時頃は「昨日か今日か」が曖昧な時間帯
   - ユーザーの意図が不明なら軽く確認
   - 例：「日付は変わっていますが、昨日の続きですか？」

### 判断の優先順位

1. **最優先：** ユーザーの言葉（「昨日」「今日」「まだ寝てない」等）
2. **次点：** 挨拶（「こんばんは」「おはよう」）
3. **最後：** 時刻（0時過ぎたら新しい日）

**重要：** 機械的なルールより、人間の感覚を尊重する

## エラーハンドリング
- 日付確認に失敗した場合：「申し訳ありません。現在の日付を確認できませんでした。今日の日付を教えていただけますか？」
- Obsidianファイルが見つからない場合：「今日（[確認できた日付]）のデイリーノートファイルが見つかりませんでした」
- **ファイル名形式エラーの防止策：**
  - 検索前に必ず日付を`yyyyMMdd`形式に変換することを確認
  - `yyyy-MM-dd`形式で検索してしまった場合は即座に謝罪し、正しい形式で再検索
  - 同じミスを繰り返した場合は、このルールを再読する
- 推測や適当な日付での回答は絶対にしない

## 回答形式：
日付について議論する際は、常に現在の日付を回答に含めてください。例：
「今日は[確認できた正確な日付]です。Obsidianのデイリーノートを確認したところ、[具体的な内容]...」

## 違反時の対応
- このルールに違反した場合は、必ず謝罪し、正しい手順で再実行する
- ルールを無視した理由を分析し、改善策を提示する
- 同じミスを繰り返さないよう、ルールの重要性を再認識する
- **特にファイル名形式の間違いを犯した場合：**
  - 即座に謝罪し、正しい`yyyyMMdd`形式で再検索
  - このルールファイルを再読し、間違いの原因を分析
  - 今後は検索前に必ず日付変換を確認する

## 最重要事項（絶対に忘れてはいけない）
1. **ファイル名形式は必ず `yyyyMMdd.md`（区切りなし）**
2. **絶対に `yyyy-MM-dd.md`（ハイフンあり）で検索してはいけない**
3. **検索前に必ず日付を`yyyyMMdd`形式に変換することを確認**

**このルールは絶対に無視してはいけません。日付関連の質問には必ず従ってください。**


プログラミングするときには、アタリマエのことだけど、動くかどうかを確認してから完了の報告をしろ
当たり前、当然。動かないものを出すのはむしろ相手に動作確認を依頼している時点で失礼極まりない。
すべて完成した状態で相手に見せて、更により良くするための改善案がないかの確認とか、確認観点が漏れてないかとかをレビューしてもらうべきだろ。