---
description: git commitメッセージ作成時のルール
---

# git commitメッセージ作成時のルール

## 目的

CursorのAIにgit操作のためのcommitメッセージの考案を依頼する際のルールを定義する。

**重要：** AIはcommitメッセージの文字列を提案するだけで、実際のgit操作（commit）はユーザーが行う。コピーできる形で文字列を提供する。

---

## 基本原則

### 1. 日本語で記述する

commitメッセージは基本日本語で記述する。

### 2. 形式は「feat: 変更内容」

commitメッセージは以下の形式で記述する：

```
feat: 変更内容
```

**プレフィックスの種類：**
- `feat:`：新機能の追加
- `fix:`：バグ修正
- `refactor:`：リファクタリング
- `docs:`：ドキュメントの変更
- `style:`：コードスタイルの変更（動作に影響しない）
- `test:`：テストの追加・変更
- `chore:`：ビルドプロセスやツールの変更

変更内容に応じて適切なプレフィックスを選択する。

### 3. 文字数制限

commitメッセージは短文から長くても30文字程度に収める。

**良い例：**
- `feat: ユーザー認証機能を追加`
- `fix: ログイン時のエラーハンドリングを修正`
- `refactor: APIレスポンス処理を共通化`

**悪い例：**
- `feat: ユーザー認証機能を追加し、ログイン画面とパスワードリセット機能も実装した`（長すぎる）

### 4. git add済みの変更のみを対象とする

**最重要：commitメッセージは、`git add`でステージング済みの変更のみを基に作成する。**

**理由：**
- `git add`していない変更は、まだコミットに含めるかどうか未確定
- 別のコミットに分けたい意図がある可能性がある
- ステージング済みの変更のみが、今回のコミットに含まれる内容

**実行手順：**
1. `git status`でステージング済みの変更を確認
2. `git diff --cached`でステージング済みの変更内容を確認
3. ステージング済みの変更のみを基にcommitメッセージを作成
4. `git diff`（ステージング前の変更）は参照しない

**悪い例：**
- ステージング前の変更も含めてcommitメッセージを作成
- `git diff`の結果を基にcommitメッセージを作成

**良い例：**
- `git diff --cached`の結果のみを基にcommitメッセージを作成
- ステージング済みの変更のみを説明するメッセージ

---

## commitメッセージ作成時の確認事項

1. **ステージング済みの変更を確認したか？**
   - `git status`で確認
   - `git diff --cached`で内容を確認

2. **ステージング前の変更を参照していないか？**
   - `git diff`は参照しない
   - ワークツリーの変更は無視する

3. **適切なプレフィックスを選択したか？**
   - 変更内容に応じたプレフィックスを使用

4. **文字数制限を守っているか？**
   - 30文字程度に収まっているか

5. **日本語で記述しているか？**
   - 基本日本語で記述

---

## 実行例

### ユーザーの依頼

「commitメッセージを作成して」

### AIの実行手順

1. `git status`を実行してステージング済みの変更を確認
2. `git diff --cached`を実行して変更内容を確認
3. 変更内容を分析して適切なプレフィックスを選択
4. 30文字程度の日本語メッセージを作成
5. **コピーできる形で文字列を提供**（実際のcommit操作はユーザーが行う）

### 出力例

コピーできる形で文字列を提供：

```
feat: ユーザー認証機能を追加
```

または

```
fix: ログイン時のエラーハンドリングを修正
```

**注意：** コードブロック内の文字列をそのままコピーして使用できる形式で提供する。

---

## 重要な注意事項

- **絶対にステージング前の変更を参照しない**
- **`git diff --cached`のみを使用する**
- **ステージング済みの変更のみを説明する**
- **ユーザーが意図的に分けたいコミットを混ぜない**

---

## まとめ

commitメッセージ作成時は：
1. 日本語で記述
2. 「feat: 変更内容」形式
3. 30文字程度に収める
4. **`git add`済みの変更のみを対象とする**
5. ステージング前の変更は参照しない
6. **コピーできる形で文字列を提供する**（実際のcommit操作はユーザーが行う）
