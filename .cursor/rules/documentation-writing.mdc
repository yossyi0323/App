---
description: ドキュメント作成時のルール
---

# ドキュメント作成時のルール

## 目的
過去の失敗から学んだ、ドキュメント作成時の注意点をまとめる。

---

## 基本原則

### 1. 関心事を適切に分離する

全体方針ドキュメントと個別ドキュメントを分離する。

全体方針ドキュメント:
- 汎用的なルール、基本方針のみを記載
- 具体例は最小限に留める

個別ドキュメント:
- 具体的な詳細、技術仕様、経緯を記載
- その対象に関する内容のみを記載

混在させると:
- 全体方針が個別の話で読みにくくなる
- 個別ドキュメントの独立性が失われる
- 情報を探しにくくなる

具体例:
- Tools開発方針.md に auto-save の詳細仕様（実装のポイント、技術スタック、テスト結果）を記載
  → 全体方針に個別詳細が混在し、方針が読みにくい
- Tools開発方針.md には auto-save の概要のみ、詳細は auto-save.md に分離
  → 各ドキュメントの役割が明確で、情報を探しやすい

### 2. 過度な一般化・固定化をしない

言語非依存のドキュメントで特定の言語・技術に限定すると:
- 他の言語・技術を使うツールが追加できなくなる
- ドキュメントと実態が乖離する

TypeScript前提のツールのドキュメントで言語を明記しないと:
- どの技術で実装されているか不明確
- 利用者が混乱する

ディレクトリ構成を固定化すると:
- ツールごとに最適な構成が採用できない
- ドキュメントが形骸化する

具体例:
- 汎用Tools開発ガイドに「TypeScriptで実装」と記載
  → Java、Rust、シェルスクリプトのツールが作れなくなる
- 汎用Tools開発ガイドには「最適な言語・技術はツールごとに選択」と記載
  → どの言語でもツールを作成できる

- auto-save（TypeScript製ツール）のドキュメントに言語を明記しない
  → 利用者がどの環境で動くか判断できない
- auto-save のドキュメントに「TypeScriptで実装」と明記
  → 利用者が Node.js 環境が必要だと理解できる

### 3. 未要求の内容を追加しない

ユーザーが指示していない内容を勝手に追加すると:
- ユーザーの意図と異なるドキュメントになる
- 不要な情報で本質が見えにくくなる

具体例:
- 「参考にすべき技術・プロジェクト」セクションをユーザーの指示なく追加
  → ユーザーが求めていない推薦情報が記載される
- ユーザーが明示的に求めた内容のみ記載
  → ユーザーの意図通りのドキュメントになる

### 4. 関連情報を適切に配置する

個別ツールの情報を全体の「関連ドキュメント」に記載すると:
- 個別ツールの情報が散在する
- どこに何があるか分かりにくい

個別ツールの情報をそのツールのセクションに記載すると:
- 情報が一箇所にまとまる
- 探しやすく、管理しやすい

具体例:
- 関連ドキュメント配下に `App/Tools/auto-save/README.md` を記載
  → auto-save の情報が複数箇所に分散する
- 既存ツール配下の auto-save セクションに README パスを記載
  → auto-save の情報が一箇所にまとまる

### 5. 無関係な内容を混ぜない

別のツールや技術検証の話を関係ないドキュメントに記載すると:
- ドキュメントの焦点がぼやける
- 読み手が混乱する

具体例:
- auto-save.md に typescript-generator や汎用CRUD APIの技術検証を記載
  → auto-save と無関係な情報が混在し、読みにくい
- auto-save.md には auto-save に関する内容のみ記載
  → auto-save の情報が明確で理解しやすい

---

## ファイル・ディレクトリ作成時の注意

### PowerShellコマンドで日本語パスを扱わない

PowerShell の New-Item コマンドで日本語を含むパスを操作すると:
- 文字化けが発生する
- ディレクトリ名が判読不能になる

write ツールでファイルを作成すると:
- 文字化けが発生しない
- 必要なディレクトリも自動作成される

具体例:
- `New-Item -ItemType Directory -Path "C:\...\エンジニア\Tools"`
  → 文字化けして「繧ｨ繝ｳ繧ｸ繝九い」のようなディレクトリ名になる
- write ツールで直接ファイルを作成
  → 正しいディレクトリ名で作成され、ディレクトリも自動作成される

---

## ドキュメント構成の指針

### 全体方針・ポリシードキュメントを書く場合
- 基本方針のみ記載
- 具体例は最小限
- 個別の詳細は別ドキュメントに分離
- 技術選定や構成を固定化しない

### 個別ツール・機能のドキュメントを書く場合
- その対象に関する内容のみ記載
- 関係ない技術検証や別ツールの話は書かない
- 設計判断、経緯、反省点を明確に記載
- コード参照パスは正確に記載
- 使用している技術スタックを明記

### 技術仕様（README等）を書く場合
- 使い方、API仕様を明確に記載
- インストール方法、動作確認方法を記載

---

### 6. 括弧内の情報が長すぎる場合は階層化する

長い括弧表現は読みにくくなる。階層化して情報を整理する。

悪い例:
```markdown
- **レスポンス**: 成功した場合、作成された投稿の全情報を含むJSON（例：`{"id": 1, "content": "内容", "createdAt": "日時", "updatedAt": "日時"}`）をHTTPステータスコード`201 Created`で返す。
```

良い例:
```markdown
- **レスポンス**
	- 成功時
		- ステータスコード：`201 Created`
		- レスポンス例：`{"id": 1, "content": "内容", "createdAt": "日時", "updatedAt": "日時"}`
```

### 7. コロンの使い方

コロンの使い方には一貫性を持たせる。

#### 全角コロン（：）を使う

半角コロン（:）ではなく、全角コロン（：）を使用する。

悪い例:
```markdown
- **目的**: データベース、バックエンドAPI...
- ステータスコード: `201 Created`
```

良い例:
```markdown
- **目的**：データベース、バックエンドAPI...
- ステータスコード：`201 Created`
```

#### コロンの後に長文が来る場合はインデント化する

コロンは「単語レベル」の情報を並べる場合に使う。長文が続く場合は、コロンを省略してインデントで階層化する。

悪い例（長文がコロンの後に続く）:
```markdown
- **動作**:
	- **一覧表示**: ページロード時に、既存のすべての投稿をバックエンドAPIから取得し、表示する。
	- **新規投稿**: 投稿フォームのSubmitボタンをクリックすると、テキストエリアの内容をバックエンドAPIに送信する。投稿が成功した場合、UIを再描画して、最新の投稿がリストに追加されていることを確認する。
```

良い例（インデントで階層化）:
```markdown
- **動作**
	- **一覧表示**
		- ページロード時に、既存のすべての投稿をバックエンドAPIから取得し、表示する。
	- **新規投稿**
		- 投稿フォームのSubmitボタンをクリックすると、テキストエリアの内容をバックエンドAPIに送信する。
		- 投稿が成功した場合、UIを再描画して、最新の投稿がリストに追加されていることを確認する。
```

許容される使い方（単語レベル）:
```markdown
- 課題1：解決
- 課題2：未解決
- ステータスコード：`200 OK`
```

### 8. 冗長な説明的括弧を付けない

人間の指示内容をそのまま繰り返すだけの括弧は邪魔で害悪。付けない。

悪い例：
```markdown
- `App/ai/{yyyyMMdd}.log`（Appワークスペースルートからの相対パス）
- ログファイルを作成（セッション終了時に作成する）
- データベース接続（PostgreSQLに接続）
```

良い例：
```markdown
- `App/ai/{yyyyMMdd}.log`
- ログファイルを作成
- データベース接続
```

ポイント：
- `App/ai/` と書けば、Appワークスペース配下と分かる。説明不要
- 文脈で明らかな情報を括弧で繰り返さない
- 本当に必要な補足のみ括弧を使う

### 9. 1文に記号は1つまで

コロン（：）、括弧（（））などの文章構造を表現する記号は、1文に1つ程度に抑える。記号が多いと読みにくくなる。

悪い例（記号が多い）:
```markdown
- 主題：内容（補足：XXX）の文章はこれです。具体的にはこうします（例：YYY）。※例外として...
- **フロントエンド**：[例：Vue.js, React, Svelte...]
- テストは全て成功すること（全クリア必須）
- カラム：`id` (主キー, 自動採番, シーケンシャル、uuidv7など), `content` (テキスト)
```

良い例（階層化で記号を減らす）:
```markdown
- 主題
    - 内容の文章はこれです。
        - 内容の補足：XXX
    - 具体的にはこうします。
        - YYY
    - ※例外として...
- **フロントエンド**：Vue.js, React, Svelte...
- テストは全て成功すること
    - 全クリア必須
- カラム
    - `id`：主キー、自動採番（シーケンシャル、uuidv7など）
    - `content`：テキスト
```

ポイント：
- インデント化すれば「例：」などの記号は不要
- 括弧内の補足情報は別の行にインデント
- 列挙は階層化する

---

## 完成前のチェックリスト

ドキュメントを完成させる前に確認:

1. 全体方針と個別詳細が混ざっていないか？
2. 過度に一般化・固定化していないか？
3. ユーザーが指示していない内容を追加していないか？
4. 個別ツールの情報が適切な場所にあるか？
5. 無関係な内容が混ざっていないか？
6. PowerShellコマンドで日本語パスを操作していないか？
7. 抽象的な評価語（適切/不適切、Good/Bad等）を使っていないか？
8. 絵文字を使っていないか？
9. 冗長な説明的括弧を付けていないか？文脈で明らかな情報を繰り返していないか？
10. 括弧内の情報が長すぎる箇所はないか？
11. 半角コロン（:）を使っていないか？全角コロン（：）に統一されているか？
12. コロンの後に長文が来ている箇所はないか？インデント化されているか？
13. 1文に記号が複数ある箇所はないか？階層化で記号を減らせるか？

---

## まとめ

ドキュメント作成前に考えること:
- この情報は本当にこのドキュメントに属するか？
- ユーザーが求めた内容か？
- 過度に固定化・一般化していないか？
- 関係ない内容が混ざっていないか？

迷ったら:
- シンプルに保つ
- ユーザーに確認する
- 勝手に決めない
