# ParallelCalendar 実装方針

## 基本原則
1. **不変性 (Immutability)**:
   - 全ての変数は `const` で定義し、既存のオブジェクトを直接変更（Mutation）しない。
   - 変更が必要な場合は、スプレッド構文等を用いて新しいオブジェクトを生成する。

2. **副作用の分離 (Separation of Side Effects)**:
   - ビジネスロジック（予定の重なり計算、時間変換等）は全て「純粋関数」として `src/utils/` または `src/domain/` に抽出する。
   - Reactコンポーネントは「表示」と「副作用（API呼出、イベントハンドリング）」のみを担当する。

3. **和型（Union Types）による状態管理**:
   - `loading: boolean` のような個別のフラグ管理を禁止する。
   - `type State = Idle | Loading | Success | Error` のような和型を用い、各状態で「あり得ないデータの組み合わせ」を型レベルで排除する。

4. **鉄道指向（Result型）のエラーハンドリング**:
   - 予期されるエラー（バリデーション失敗等）に対して `throw` を使用しない。
   - `{ success: true, data: T } | { success: false, error: E }` のようなResult型を戻り値とし、呼び出し側にハンドリングを強制する。

## コーディング・アドバイスへの期待
- 手続き的な `for` ループを見つけたら、宣言的な `map/filter/reduce` への書き換えを提案すること。
- 複雑な `if-else` を見つけたら、Union型とパターンマッチによる整理を提案すること。