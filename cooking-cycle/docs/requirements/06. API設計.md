# API設計（概要）

## 注意事項

**データモデル設計が完了してから、詳細なAPI設計を行う。**

現在のドキュメントは、データモデルが確定していないため、基本的な方針のみを記載しています。

## Next.js App Routerの基本方針

- **App Router：** Next.js 13+ のApp Routerを使用
- **Server Components：** デフォルトでServer Components
- **Server Actions：** データ更新はServer Actionsを使用
- **API Routes：** 必要に応じてAPI Routesを使用

## 認証・認可（基本方針）

- **Google認証：** NextAuth.jsまたは類似ライブラリを使用
- **認証状態：** セッションで管理
- **認可：** ユーザーごとにデータを分離

## エラーハンドリング（基本方針）

- **バリデーションエラー：** Zodでバリデーション
- **データベースエラー：** 適切なエラーメッセージを返す
- **認証エラー：** 401を返す

## データモデル設計後の作業

データモデル設計が完了したら、以下を決定します：

1. **エンドポイント設計：** データモデルに基づいたAPIエンドポイント
2. **リクエスト/レスポンス形式：** データ構造に合わせた形式
3. **ルーティング設計：** Next.js App Routerの具体的なルート設計
4. **検索・フィルターAPI：** データモデルに基づいた検索ロジック

